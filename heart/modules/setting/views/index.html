<style type="text/css">
	#setting-chooser {
		position: relative;
	}
	#setting-title {
		padding: 10px 0;
		margin-bottom: 10px;
		width: 50%;
	}

	#setting-chooser form {
		position: absolute;
		right: 0;
		top: 8px;
	}

	#setting-chooser form label {
		width: 100px;
	}

	#setting {
		border: 1px solid #EFEFEF;
	}
	.form .even {
		background: #F4F4F4;
	}
	.form .form-block {
		padding: 10px;
		margin-bottom: 0;
	}
	.form-block label {
		width: 25%;
	}
	.form .form-right-block {
		margin-left: 25%;
	}
	.form .form-right-block label {
		margin-right: 15px;
	}
	.form-right-block p {
		color: #878787;
		font-size: 0.8em;
	}
	.form input[type="radio"], .form input[type="checkbox"] {
		float: none;
		margin: 0 5px 0 0;
	}
	#keygen { color: #882020; cursor: pointer; margin-left: 20px;}
</style>
<div id="setting-chooser">
	<h3 id="setting-title">{{ $title }}</h3>

	{{ Form::start(adminUrl('setting'), 'setting_chooser') }}
		{{ Form::label('Choose For :: ', 'setting_choose') }}
		{{ Form::select('setting_choose', $lists, \Uri::current().'/') }}
	{{ Form::end() }}
</div>

{{ Form::start(adminUrl('setting/save/'.$type), 'setting', false, array('class' => 'form')) }}

	{{ Form::hidden('type', $type) }}

	{{ loop($settings as $set) }}

	{= $class = cycle('odd', 'even') =}

	<div class="form-block {{ $class }}">
		<label for="{{ $set['slug'] }}">{{ $set['name'] }}

			{{ if($set['require']) }}
			<span class="required"></span>
			{{ endif }}
		</label>

		<div class="form-right-block">
			{{ Setting\UI::field($set) }}
			<p>{{ $set['desc'] }}</p>
		</div> <!-- end of form-right-block -->
	</div> <!-- end of form block -->

	{{ endloop }}

	<div class="form-block form-action">
		<button type="submit" class="btn btn-green">{{ t('global.save') }}</button>
	</div> <!-- end of form block -->

{{ Form::end() }}

<script type="text/javascript">

	var org_value = $('#setting_choose').val();

	$('#setting_choose').on('change', function(){
		var val = $('#setting_choose').val();

		if (org_value == val) {
			return false;
		} else {
			return window.location.href = val;
		}
	});

	//Generate Spam Filter Key
	$('#spam_filter').after('<span id="keygen">{{ t('setting::setting.auto_generate') }}</span>');

	//Generate Spam Filter Key
	$('#keygen').on('click', function(){
		var key = Reborn.keyGenerate(32);
		$('#spam_filter').val(key);
		$('#spam_filter').focus();
	});

</script>
